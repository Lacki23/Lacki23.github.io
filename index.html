<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lacki23 — Portfolio</title>
    <style>
      :root {
        --bg: #0a0e14;
        --card: rgba(24, 30, 40, 0.85);
        --card-hover: rgba(28, 36, 48, 0.95);
        --muted: #8fa3b8;
        --text: #f0f6fc;
        --accent: #00d4ff;
        --accent-glow: #00d4ff40;
        --border: rgba(64, 80, 96, 0.3);
        --border-hover: rgba(0, 212, 255, 0.4);
        --gradient-primary: linear-gradient(
          135deg,
          #0a0e14 0%,
          #1a2332 50%,
          #0d1117 100%
        );
        --gradient-card: linear-gradient(
          145deg,
          rgba(24, 30, 40, 0.9) 0%,
          rgba(16, 22, 32, 0.8) 100%
        );
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.15);
        --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.25);
        --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.35);
        --glow: 0 0 20px rgba(0, 212, 255, 0.3);
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font: 16px/1.6 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Inter", sans-serif;
        position: relative;
        overflow-x: hidden;
        scroll-behavior: smooth;
      }
      body {
        background: var(--gradient-primary);
        min-height: 100vh;
        position: relative;
      }
      body::before {
        content: "";
        position: fixed;
        inset: 0;
        z-index: -2;
        background: radial-gradient(
            circle at 20% 30%,
            rgba(0, 212, 255, 0.1) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 70%,
            rgba(138, 43, 226, 0.08) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 80%,
            rgba(0, 255, 127, 0.06) 0%,
            transparent 50%
          ),
          var(--gradient-primary);
        animation: aurora 20s ease-in-out infinite alternate;
      }
      body::after {
        content: "";
        position: fixed;
        inset: 0;
        z-index: -1;
        background: radial-gradient(
            1px 1px at 20px 30px,
            rgba(255, 255, 255, 0.15),
            transparent
          ),
          radial-gradient(
            1px 1px at 40px 70px,
            rgba(0, 212, 255, 0.2),
            transparent
          ),
          radial-gradient(
            2px 2px at 80px 120px,
            rgba(138, 43, 226, 0.1),
            transparent
          );
        background-size: 100px 100px, 150px 150px, 200px 200px;
        animation: float 30s linear infinite;
      }
      @keyframes aurora {
        0% {
          filter: hue-rotate(0deg) brightness(1);
        }
        50% {
          filter: hue-rotate(90deg) brightness(1.1);
        }
        100% {
          filter: hue-rotate(180deg) brightness(0.9);
        }
      }
      @keyframes float {
        from {
          transform: translateY(0px);
        }
        to {
          transform: translateY(-200px);
        }
      }
      .wrap {
        max-width: 1400px;
        margin-inline: auto;
        padding: clamp(16px, 4vw, 32px);
        position: relative;
        z-index: 10;
      }
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 20px;
        margin-bottom: clamp(24px, 6vw, 48px);
        padding: clamp(16px, 4vw, 24px);
        background: var(--gradient-card);
        border: 1px solid var(--border);
        border-radius: 20px;
        backdrop-filter: blur(20px);
        box-shadow: var(--shadow-md);
        animation: slideDown 0.8s ease-out;
      }
      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .title {
        font-weight: 800;
        font-size: clamp(24px, 5vw, 36px);
        letter-spacing: -0.02em;
        /* Fallback color for browsers that don't support background-clip */
        color: var(--accent);
        background: linear-gradient(135deg, var(--accent), #8a2be2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-shadow: 0 0 30px var(--accent-glow);
        animation: glow 3s ease-in-out infinite alternate;
      }
      /* Support detection for background-clip */
      @supports not (-webkit-background-clip: text) {
        .title {
          background: none;
          color: var(--accent);
          -webkit-text-fill-color: unset;
        }
      }
      @keyframes glow {
        from {
          filter: brightness(1);
        }
        to {
          filter: brightness(1.2);
        }
      }
      .subtitle {
        color: var(--muted);
        font-size: clamp(12px, 2.5vw, 16px);
        font-weight: 500;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(460px, 1fr));
        gap: clamp(20px, 4vw, 32px);
        opacity: 0;
        animation: fadeInUp 1s ease-out 0.3s forwards;
      }
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(40px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .card {
        background: var(--gradient-card);
        border: 1px solid var(--border);
        border-radius: 20px;
        overflow: hidden;
        display: grid;
        grid-template-columns: auto 1fr;
        grid-template-rows: 1fr;
        align-items: stretch;
        min-height: clamp(180px, 22vw, 240px);
        width: 100%;
        box-shadow: var(--shadow-md);
        transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        backdrop-filter: blur(20px);
        position: relative;
        cursor: pointer;
        animation: cardAppear 0.6s ease-out backwards;
      }
      .card::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 20px;
        padding: 1px;
        background: linear-gradient(
          135deg,
          transparent,
          var(--border-hover),
          transparent
        );
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask-composite: xor;
        opacity: 0;
        transition: opacity 0.4s ease;
      }
      .card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: var(--shadow-lg), var(--glow);
        border-color: var(--border-hover);
        background: var(--card-hover);
      }
      .card:hover::before {
        opacity: 1;
      }
      @keyframes cardAppear {
        from {
          opacity: 0;
          transform: translateY(30px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      .poster-wrapper {
        overflow: hidden;
        width: auto;
        height: 100%;
        position: relative;
        border-radius: 20px 0 0 20px;
        background: linear-gradient(135deg, #0a0e14, #1a2332);
        aspect-ratio: 3/4;
        min-width: clamp(135px, 25vw, 180px);
        max-width: 200px;
      }
      .poster {
        width: 100%;
        height: 100%;
        object-fit: cover;
        background: linear-gradient(135deg, #0a0e14, #1a2332);
        display: block;
        transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        object-position: center;
      }
      .card:hover .poster {
        transform: scale(1.1);
      }
      .poster.broken {
        background: linear-gradient(135deg, #18222b, #0f1419);
        width: 100%;
        height: 100%;
        min-height: 100%;
      }
      .content {
        padding: clamp(18px, 4vw, 24px);
        display: flex;
        flex-direction: column;
        gap: clamp(10px, 2.5vw, 16px);
        position: relative;
        height: 100%;
        align-self: stretch;
        overflow: hidden;
        min-width: 0;
      }
      .card-header {
        padding: clamp(16px, 4vw, 20px);
        padding-bottom: clamp(8px, 2vw, 12px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      }
      .card-title {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 8px;
        margin-bottom: clamp(8px, 2vw, 12px);
        min-width: 0;
      }
      .name {
        font-weight: 700;
        font-size: clamp(16px, 3.5vw, 22px);
        color: var(--text);
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        transition: all 0.3s ease;
        line-height: 1.3;
        flex: 1;
        overflow: hidden;
        /* text-overflow: ellipsis;
        white-space: nowrap; */
        min-width: 0;
      }
      .card:hover .name {
        color: var(--accent);
        text-shadow: 0 0 10px var(--accent-glow);
      }
      .status-badge {
        font-size: clamp(11px, 2vw, 13px);
        font-weight: 600;
        padding: 6px 10px;
        border-radius: 12px;
        text-transform: uppercase;
        letter-spacing: 0.4px;
        white-space: nowrap;
        flex-shrink: 0;
      }
      .status-badge.official {
        background: linear-gradient(
          135deg,
          rgba(34, 197, 94, 0.2),
          rgba(34, 197, 94, 0.1)
        );
        color: #22c55e;
        border: 1px solid rgba(34, 197, 94, 0.3);
      }
      .status-badge.unofficial {
        background: linear-gradient(
          135deg,
          rgba(239, 68, 68, 0.2),
          rgba(239, 68, 68, 0.1)
        );
        color: #ef4444;
        border: 1px solid rgba(239, 68, 68, 0.3);
      }
      .flags-row {
        display: flex;
        justify-content: flex-start;
        align-items: center;
      }
      .flags {
        display: inline-flex;
        gap: 6px;
        align-items: center;
        transition: transform 0.3s ease;
      }
      .flags img {
        width: 20px;
        height: 20px;
        border-radius: 3px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
      }
      .card:hover .flags img {
        box-shadow: 0 4px 12px rgba(0, 212, 255, 0.3);
      }
      .pill {
        border: 1px solid var(--border);
        color: var(--muted);
        padding: clamp(4px, 2vw, 8px) clamp(8px, 3vw, 14px);
        border-radius: 999px;
        font-size: clamp(10px, 2.5vw, 12px);
        font-weight: 600;
        background: linear-gradient(
          135deg,
          rgba(21, 27, 34, 0.9),
          rgba(26, 32, 41, 0.8)
        );
        backdrop-filter: blur(10px);
        box-shadow: var(--shadow-sm);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        position: relative;
        overflow: hidden;
      }
      .pill::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          transparent,
          var(--accent-glow),
          transparent
        );
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .pill:hover {
        background: linear-gradient(
          135deg,
          rgba(26, 32, 41, 0.95),
          rgba(31, 37, 48, 0.9)
        );
        transform: translateY(-2px) scale(1.05);
        box-shadow: var(--shadow-md), 0 0 20px var(--accent-glow);
        border-color: var(--border-hover);
        color: var(--accent);
      }
      .pill:hover::before {
        opacity: 0.1;
      }
      .card-body {
        padding: clamp(12px, 3vw, 16px) clamp(16px, 4vw, 20px);
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: clamp(12px, 3vw, 14px);
      }
      .info-grid {
        display: grid;
        gap: clamp(8px, 2vw, 12px);
      }
      .info-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: clamp(8px, 2vw, 10px) 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.03);
      }
      .info-row:last-child {
        border-bottom: none;
      }
      .info-label {
        color: var(--muted);
        font-size: clamp(11px, 2.5vw, 12px);
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.3px;
      }
      .info-value {
        font-weight: 600;
        color: var(--text);
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        font-size: clamp(12px, 2.8vw, 13px);
      }
      .card:hover .info-value {
        color: var(--accent);
        text-shadow: 0 0 6px var(--accent-glow);
      }
      .platforms-row {
        display: flex;
        justify-content: space-between;
        /* align-items: center; */
        gap: 12px;
      }
      .platforms-row .info-label {
        padding-top: 7.5px;
      }
      .platforms-badges {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        align-items: center;
        justify-content: flex-end;
        animation: slideIn 0.5s ease-out 0.2s both;
      }
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      .card-footer {
        padding: clamp(12px, 3vw, 16px) clamp(16px, 4vw, 20px);
        padding-right: 0;
        padding-top: 16px;
        margin-top: auto;
        display: flex;
        justify-content: flex-end;
        align-items: center;
      }
      .link {
        color: var(--accent);
        text-decoration: none;
        font-size: clamp(11px, 2.5vw, 13px);
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        padding: clamp(4px, 1vw, 6px) clamp(8px, 2vw, 12px);
        border-radius: 8px;
        background: rgba(0, 212, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 212, 255, 0.2);
        position: relative;
        overflow: hidden;
      }
      .link::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          transparent,
          rgba(0, 212, 255, 0.2),
          transparent
        );
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      .link:hover {
        color: #ffffff;
        transform: translateY(-2px) scale(1.05);
        box-shadow: 0 8px 20px rgba(0, 212, 255, 0.3);
        background: rgba(0, 212, 255, 0.2);
        border-color: var(--accent);
      }
      .link:hover::before {
        transform: translateX(100%);
      }
      .btn {
        text-decoration: none;
        font-weight: 700;
        font-size: clamp(11px, 2.5vw, 13px);
        padding: clamp(6px, 2vw, 10px) clamp(12px, 3vw, 16px);
        border: 2px solid var(--accent);
        border-radius: 12px;
        color: var(--accent);
        background: linear-gradient(
          135deg,
          rgba(15, 22, 32, 0.9),
          rgba(21, 29, 40, 0.8)
        );
        backdrop-filter: blur(20px);
        box-shadow: var(--shadow-md), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        position: relative;
        overflow: hidden;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }
      .btn::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          transparent,
          var(--accent),
          transparent
        );
        opacity: 0;
        transition: opacity 0.4s ease;
      }
      .btn::after {
        content: "";
        position: absolute;
        inset: 2px;
        border-radius: 10px;
        background: linear-gradient(
          135deg,
          rgba(0, 212, 255, 0.1),
          rgba(138, 43, 226, 0.05)
        );
        opacity: 0;
        transition: opacity 0.4s ease;
      }
      .btn:hover {
        background: linear-gradient(
          135deg,
          rgba(21, 29, 40, 0.95),
          rgba(26, 35, 48, 0.9)
        );
        transform: translateY(-4px) scale(1.05);
        box-shadow: var(--shadow-lg), var(--glow),
          inset 0 1px 0 rgba(255, 255, 255, 0.2);
        color: #ffffff;
        border-color: #ffffff;
      }
      .btn:hover::before {
        opacity: 0.1;
      }
      .btn:hover::after {
        opacity: 1;
      }
      @media (max-width: 768px) {
        .card {
          grid-template-columns: 1fr 1fr;
          min-height: clamp(380px, 55vw, 460px);
          border-radius: 20px;
        }
        .poster-wrapper {
          /* height: clamp(200px, 50%, 280px); */
          width: 100%;
          aspect-ratio: unset;
          min-width: unset;
          max-width: unset;
          border-radius: 20px 20px 0 0;
        }
        .content {
          padding: clamp(14px, 4vw, 18px);
          gap: clamp(8px, 2vw, 12px);
        }
        .card:hover {
          transform: translateY(-4px) scale(1.01);
        }
        .grid {
          gap: clamp(20px, 5vw, 24px);
          grid-template-columns: 1fr;
        }
      }
      @media (max-width: 540px) {
        .card {
          grid-template-columns: 1fr;
        }
      }
      .tabs {
        display: flex;
        gap: clamp(8px, 2vw, 12px);
        margin: clamp(12px, 3vw, 16px) 0 clamp(20px, 5vw, 32px);
        padding: 8px;
        background: var(--gradient-card);
        border-radius: 16px;
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        animation: slideUp 0.6s ease-out 0.2s both;
      }
      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .tab {
        appearance: none;
        border: 1px solid transparent;
        background: transparent;
        color: var(--muted);
        padding: clamp(8px, 2vw, 12px) clamp(16px, 4vw, 20px);
        border-radius: 12px;
        cursor: pointer;
        font-weight: 600;
        font-size: clamp(12px, 3vw, 14px);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        position: relative;
        overflow: hidden;
      }
      .tab::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, var(--accent-glow), transparent);
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .tab.active,
      .tab[aria-selected="true"] {
        background: linear-gradient(
          135deg,
          rgba(0, 212, 255, 0.2),
          rgba(138, 43, 226, 0.1)
        );
        border-color: var(--accent);
        color: var(--accent);
        box-shadow: 0 4px 12px rgba(0, 212, 255, 0.2);
        transform: translateY(-2px);
      }
      .tab:hover:not(.active) {
        background: rgba(255, 255, 255, 0.05);
        color: var(--text);
        transform: translateY(-1px);
      }
      .tab:hover::before {
        opacity: 0.1;
      }
      .legend {
        display: flex;
        gap: clamp(12px, 3vw, 16px);
        flex-wrap: wrap;
        margin-bottom: clamp(16px, 4vw, 20px);
        color: var(--muted);
        font-size: clamp(12px, 3vw, 14px);
        padding: clamp(12px, 3vw, 16px);
        background: rgba(255, 255, 255, 0.02);
        border-radius: 12px;
        backdrop-filter: blur(10px);
        border: 1px solid var(--border);
        animation: fadeIn 0.8s ease-out 0.4s both;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
      footer {
        margin-top: clamp(32px, 8vw, 48px);
        color: var(--muted);
        font-size: clamp(11px, 2.5vw, 12px);
        text-align: center;
        padding: clamp(16px, 4vw, 24px);
        background: var(--gradient-card);
        border-radius: 16px;
        backdrop-filter: blur(20px);
        border: 1px solid var(--border);
        animation: slideUp 0.6s ease-out 0.6s both;
      }
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }
      @media (prefers-reduced-motion: no-preference) {
        html {
          scroll-behavior: smooth;
        }
      }
    </style>
    <script
      src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div>
          <div class="title">
            Lacki23
            <span style="color: var(--muted); font-weight: 600"
              >— game translator</span
            >
          </div>
        </div>
      </header>

      <nav class="tabs" role="tablist" aria-label="Стан локалізацій">
        <button
          class="tab active"
          role="tab"
          aria-selected="true"
          data-tab="finished"
        >
          Finished
        </button>
        <button class="tab" role="tab" aria-selected="false" data-tab="work">
          In Work
        </button>
      </nav>

      <div class="legend">
        <span>Official: ✅ / ❌</span>
        <span>Flags 🇺🇦/🇺🇸: dev/pub roots</span>
      </div>

      <div id="grid" class="grid" role="list"></div>

      <footer>
        <strong>Lacki23's</strong> site. Creator's: <strong>Little Bit</strong> & <strong>enootegg</strong>.
      </footer>
    </div>

    <script>
      const defaultGames = [
        {
          title: "ENA: Dream BBQ",
          appId: "2134320",
          downloadUrl: "",
          official: false,
          flags: ["🇺🇸"],
          collaboration: "In Work",
          platforms: ["PC"],
        },
        {
          title: "Pawnbarian",
          appId: "1142080",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "The Creepy Syndrome",
          appId: "2003880",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Blocky Dungeon",
          appId: "1683370",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Insomnia: Theater in the Head",
          appId: "2085360",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Remnants of Naezith",
          appId: "590590",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "To Have and to Hold",
          appId: "2513080",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "FINIS",
          appId: "2103370",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "It gets so lonely here",
          appId: "2386250",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "PocketCars",
          appId: "1170720",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Atrio: The Dark Wild",
          appId: "1125390",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Crashy Laps",
          appId: "2257410",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Six Days of Snow",
          appId: "754810",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Higurashi When They Cry Hou - Ch.2 Watanagashi",
          appId: "410890",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "DETECTIVE - Stella Porta case",
          appId: "2383220",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Sand Story",
          appId: "1749420",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Silence Channel 2",
          appId: "2145220",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Once on a windswept night",
          appId: "585880",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "On the Peril of Parrots",
          appId: "2137480",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Scholar's Mate",
          appId: "2095510",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "A Winter's Daydream",
          appId: "925340",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Demon Lord Reincarnation",
          appId: "2395150",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "HORROR TALES: The Beggar",
          appId: "1343340",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Prune & Milo",
          appId: "2787710",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Son of a Gun",
          appId: "2288600",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Bio Prototype:Re",
          appId: "3060520",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "The Sad Story of Emmeline Burns",
          appId: "429940",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
        {
          title: "Numina",
          appId: "597060",
          downloadUrl: "",
          official: false,
          flags: [],
          collaboration: "",
          platforms: ["PC"],
        },
      ];

      async function loadData() {
        try {
          const res = await fetch("games.json", { cache: "no-store" });
          if (!res.ok) throw new Error("fetch fail");
          const data = await res.json();
          ALL_ITEMS = data.games ?? defaultGames;
          splitItems(ALL_ITEMS);
          renderTab(CURRENT_TAB);
        } catch (e) {
          ALL_ITEMS = defaultGames;
          splitItems(ALL_ITEMS);
          renderTab(CURRENT_TAB);
        }
      }

      // Build ordered list of candidate poster URLs for a game
      function posterSources(item) {
        const sources = [];
        if (item.imageUrl) sources.push(item.imageUrl);
        if (item.appId) {
          const id = item.appId;
          // Prefer Cloudflare canonical path; then Akamai; then Fastly store_item_assets
          sources.push(
            `https://cdn.cloudflare.steamstatic.com/steam/apps/${id}/library_600x900.jpg`,
            `https://cdn.cloudflare.steamstatic.com/steam/apps/${id}/header.jpg`,
            `https://steamcdn-a.akamaihd.net/steam/apps/${id}/header.jpg`,
            `https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/${id}/header.jpg`
          );
        }
        return sources;
      }

      // Try each source until one loads
      function attachPoster(img, item) {
        const list = posterSources(item);
        let i = 0;
        if (!list.length) {
          img.classList.add("broken");
          return;
        }
        const tryNext = () => {
          if (i >= list.length) {
            img.classList.add("broken");
            img.removeAttribute("src");
            return;
          }
          img.src = list[i++];
        };
        img.addEventListener("error", tryNext, { once: false });
        tryNext();
      }

      let ALL_ITEMS = [];
      let SPLIT = { finished: [], work: [] };
      let CURRENT_TAB = "finished";

      function isWorkItem(g) {
        const mark = (g.status || g.collaboration || "")
          .toString()
          .toLowerCase();
        return mark.includes("work"); // "In Work", "work in progress", тощо
      }

      function splitItems(items) {
        SPLIT.work = items.filter(isWorkItem);
        SPLIT.finished = items.filter((g) => !isWorkItem(g));
      }

      function renderTab(which) {
        CURRENT_TAB = which;
        const tabs = document.querySelectorAll(".tabs .tab");
        tabs.forEach((btn) => {
          const on = btn.dataset.tab === which;
          btn.classList.toggle("active", on);
          btn.setAttribute("aria-selected", on ? "true" : "false");
        });
        const list = which === "work" ? SPLIT.work : SPLIT.finished;
        render(list);
      }

      document.addEventListener("click", (e) => {
        const btn = e.target.closest(".tab");
        if (!btn) return;
        const which = btn.dataset.tab;
        if (which) renderTab(which);
      });

      const TWEMOJI_SVG_BASE =
        "https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/";

      function isoToTwemojiFilename(iso) {
        const A = "A".codePointAt(0);
        const base = 0x1f1e6; // Regional Indicator Symbol Letter A
        const up = (iso || "").toUpperCase();
        if (!/^[A-Z]{2}$/.test(up)) return null;
        const cps = [
          up.codePointAt(0) - A + base,
          up.codePointAt(1) - A + base,
        ];
        return cps.map((cp) => cp.toString(16)).join("-");
      }

      function emojiToTwemojiFilename(emoji) {
        if (!emoji) return null;
        const cps = Array.from(emoji);
        // Expect two regional indicator symbols
        const hex = cps.map((ch) => ch.codePointAt(0).toString(16)).join("-");
        if (hex.includes("1f1e") || hex.includes("1f1f")) return hex;
        // If it's not regional indicators, try interpreting as ISO
        return isoToTwemojiFilename(emoji);
      }

      function renderFlags(el, arr) {
        el.innerHTML = "";
        if (!Array.isArray(arr) || arr.length === 0) {
          el.style.display = "none";
          return;
        }
        el.style.display = "inline-flex";
        for (const raw of arr) {
          const fn = emojiToTwemojiFilename(raw);
          if (fn) {
            const img = document.createElement("img");
            img.decoding = "async";
            img.loading = "lazy";
            img.alt = raw;
            img.src = TWEMOJI_SVG_BASE + fn + ".svg";
            img.onerror = () => {
              const span = document.createElement("span");
              span.textContent = raw;
              img.replaceWith(span);
            };
            el.append(img);
          } else {
            // Fallback text
            const span = document.createElement("span");
            span.textContent = raw;
            el.append(span);
          }
        }
      }

      function render(items) {
        const grid = document.getElementById("grid");
        grid.innerHTML = "";
        for (const g of items) {
          const card = document.createElement("article");
          card.className = "card";
          card.setAttribute("role", "listitem");
          card.style.animationDelay = `${Math.random() * 0.5}s`;

          const posterWrapper = document.createElement("div");
          posterWrapper.className = "poster-wrapper";

          const img = document.createElement("img");
          img.className = "poster";
          img.alt = "";
          attachPoster(img, g);

          posterWrapper.appendChild(img);

          // Content
          const content = document.createElement("div");
          content.className = "content";

          // Title and status
          const titleRow = document.createElement("div");
          titleRow.className = "card-title";

          const name = document.createElement("div");
          name.className = "name";
          name.textContent = g.title;

          const statusBadge = document.createElement("div");
          statusBadge.className = `status-badge ${
            g.official ? "official" : "unofficial"
          }`;
          statusBadge.textContent = g.official ? "Official" : "Community";

          titleRow.append(name, statusBadge);

          // Flags
          const flags = document.createElement("div");
          flags.className = "flags";
          renderFlags(flags, g.flags);

          // Collaboration info
          let collabRow = null;
          if (g.collaboration) {
            collabRow = document.createElement("div");
            collabRow.className = "info-row";

            const collabLabel = document.createElement("div");
            collabLabel.className = "info-label";
            collabLabel.textContent = "Collaboration";

            const collabValue = document.createElement("div");
            collabValue.className = "info-value";
            collabValue.textContent = g.collaboration;

            collabRow.append(collabLabel, collabValue);
          }

          // Platforms
          const platformsRow = document.createElement("div");
          platformsRow.className = "platforms-row";

          const platLabel = document.createElement("div");
          platLabel.className = "info-label";
          platLabel.textContent = "Platforms";

          const platformsBadges = document.createElement("div");
          platformsBadges.className = "platforms-badges";

          let plats = [];
          if (Array.isArray(g.platforms)) plats = g.platforms;
          else if (typeof g.platforms === "string" && g.platforms.trim().length)
            plats = g.platforms
              .split(",")
              .map((s) => s.trim())
              .filter(Boolean);

          if (plats.length === 0) {
            const dash = document.createElement("div");
            dash.className = "info-value";
            dash.textContent = "—";
            platformsBadges.append(dash);
          } else {
            for (const p of plats) {
              const badge = document.createElement("span");
              badge.className = "pill";
              badge.textContent = p;
              platformsBadges.append(badge);
            }
          }

          platformsRow.append(platLabel, platformsBadges);

          // CTA Button
          let cta = null;
          if (g.official) {
            if (g.appId) {
              cta = document.createElement("a");
              cta.className = "link";
              cta.href = `https://store.steampowered.com/app/${g.appId}`;
              cta.target = "_blank";
              cta.rel = "noopener";
              cta.textContent = "Open in Steam →";
            }
          } else {
            if (g.downloadUrl) {
              cta = document.createElement("a");
              cta.className = "btn";
              cta.href = g.downloadUrl;
              cta.target = "_blank";
              cta.rel = "noopener";
              cta.textContent = "Download";
            }
          }

          // Assemble content
          content.append(titleRow, flags);
          if (collabRow) content.append(collabRow);
          content.append(platformsRow);
          if (cta) {
            const ctaWrapper = document.createElement("div");
            ctaWrapper.className = "card-footer";
            ctaWrapper.append(cta);
            content.append(ctaWrapper);
          }

          card.append(posterWrapper, content);
          grid.append(card);
        }
      }

      loadData();
    </script>
  </body>
</html>
