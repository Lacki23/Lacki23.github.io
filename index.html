<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lacki23 ‚Äî —Ç–µ—Å—Ç —Å–∞–π—Ç—É</title>
  <style>
    :root{
      --bg:#0b0f12;
      --card:#12181e;
      --muted:#9bb0c3;
      --text:#e8f0f8;
      --accent:#1abc9c;
      --border:#22303b;
    }
    html,body{margin:0;background:#0b0f12;color:var(--text);font:16px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial,"Noto Color Emoji","Apple Color Emoji","Segoe UI Emoji",sans-serif;position:relative;overflow-x:hidden;}
    body{
      margin:0;
      background:#0b0f12; /* –±–∞–∑–æ–≤–∏–π —Ç–µ–º–Ω–∏–π –º–∞—Ç–æ–≤–∏–π */
      color:var(--text);
      font:16px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,Inter,Arial,"Noto Color Emoji","Apple Color Emoji","Segoe UI Emoji",sans-serif;
    }
    /* –ê–Ω—ñ–º–æ–≤–∞–Ω–∏–π –º–∞—Ç–æ–≤–∏–π –≥—Ä–∞–¥—ñ—î–Ω—Ç */
    body::before{
      content:"";
      position:fixed; inset:0; z-index:-1;
      background:
        radial-gradient(1100px 700px at 12% 18%, #10161c 0%, #0b0f12 60%),
        radial-gradient(1200px 800px at 88% 82%, #0c1319 0%, transparent 60%),
        linear-gradient(180deg, #0b0f12 0%, #0a0f14 100%);
      background-repeat:no-repeat;
      background-size:140% 140%, 140% 140%, 100% 100%;
      background-position:0% 0%, 100% 100%, 0% 0%;
      filter:saturate(0.9) brightness(0.95);
      animation:drift 36s ease-in-out infinite alternate;
      will-change:background-position;
    }
    @keyframes drift{
      from{background-position:0% 0%, 100% 100%, 0% 0%;}
      to  {background-position:100% 0%, 0% 100%, 0% 0%;}
    }
    .wrap{max-width:1200px;margin-inline:auto;padding:24px;position:relative;z-index:2;}
    header{
      display:flex;align-items:center;justify-content:space-between;
      gap:16px;margin-bottom:16px
    }
    .title{
      font-weight:800;font-size:clamp(20px,2.4vw,28px);
      letter-spacing:0.2px
    }
    .subtitle{color:var(--muted);font-size:14px}
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
      gap:16px;
    }
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      overflow:hidden;
      display:grid;
      grid-template-columns:160px 1fr;
      min-height:168px;
    }
    .poster{
      width:100%;
      height:100%;
      object-fit:cover;
      background:#0a0e12;
      display:block;
    }
    .poster.broken{
      background:linear-gradient(135deg,#18222b,#0f1419);
      min-height:100%;min-width:100%
    }
    .content{padding:14px 14px 16px 14px;display:flex;flex-direction:column;gap:6px}
    .row{display:flex;flex-wrap:wrap;gap:8px 14px;align-items:center}
    .name{font-weight:700;font-size:16px}
    .flags{opacity:.95;display:inline-flex;gap:6px;align-items:center}
    .flags img{width:20px;height:20px;vertical-align:middle;image-rendering:auto;display:block}
    .pill{
      border:1px solid var(--border);
      color:var(--muted);
      padding:4px 8px;border-radius:999px;font-size:12px;
      background:#151b22;
    }
    .badges{display:flex;flex-wrap:wrap;gap:8px;}
    .label{color:var(--muted);font-size:14px;min-width:108px}
    .val{font-weight:600}
    .meta{display:flex;gap:10px;flex-wrap:wrap}
    .link{
      margin-left:auto;color:#9be7ff;text-decoration:none;font-size:13px
    }
    .link:hover{text-decoration:underline}
    .btn{margin-left:auto; text-decoration:none; font-weight:600; font-size:13px; padding:6px 10px; border:1px solid var(--border); border-radius:10px; color:#cdeaff; background:#0f1620}
    .btn:hover{filter:brightness(1.1)}
    @media (max-width:640px){
      .card{grid-template-columns:1fr}
      .content{padding:12px}
    }
    footer{margin-top:24px;color:var(--muted);font-size:12px;text-align:center}
    .legend{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px;color:var(--muted);font-size:14px}
    .tabs{display:flex;gap:8px;margin:8px 0 16px}
    .tab{appearance:none;border:1px solid var(--border);background:#11171d;color:var(--text);padding:8px 14px;border-radius:12px;cursor:pointer;font-weight:700}
    .tab[aria-selected="true"], .tab.active{background:#15212c;border-color:#2a3947}
    .tab:focus{outline:2px solid #2a3947;outline-offset:2px}
  
    .bg-anim{
      position:fixed; inset:0; z-index:0; pointer-events:none;
      background:linear-gradient(135deg,
        #0b0f12 0%,
        #121a25 25%,
        #0b141c 50%,
        #162232 75%,
        #0b0f12 100%);
      background-size:300% 300%;
      animation:gradientShift 30s ease-in-out infinite;
      filter:brightness(0.95) saturate(1.05) contrast(1.05);
    }
    .bg-anim::before, .bg-anim::after{
      background:radial-gradient(closest-side, #0e1924 0%, transparent 60%);
      animation:blob2 44s ease-in-out infinite alternate;
    }
    .bg-anim::before{
      background:radial-gradient(closest-side, #1a2a3a 0%, transparent 60%);
      animation:blob1 36s ease-in-out infinite alternate;
    }
    .bg-anim::after{
      background:radial-gradient(closest-side, #0e1924 0%, transparent 60%);
      animation:blob2 44s ease-in-out infinite alternate;
    }
    @keyframes blob1{
      0%{ transform:translate3d(0,0,0) scale(1); }
      100%{ transform:translate3d(20%, -10%, 0) scale(1.05); }
    }
    @keyframes blob2{
      0%{ transform:translate3d(0,0,0) scale(1.05); }
      100%{ transform:translate3d(-15%, 15%, 0) scale(1); }
    }
    @media (prefers-reduced-motion: reduce){
      .bg-anim::before, .bg-anim::after{
      background:radial-gradient(closest-side, #0e1924 0%, transparent 60%);
      animation:blob2 44s ease-in-out infinite alternate;
    }
    }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <div class="bg-anim" aria-hidden="true"></div>
  <div class="wrap">
    <header>
      <div>
        <div class="title">Lacki23 <span style="color:var(--muted);font-weight:600;">‚Äî —Ç–µ—Å—Ç —Å–∞–π—Ç—É</span></div>
        <div class="subtitle">–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —É–∫—Ä–∞—ó–Ω—ñ–∑–∞—Ç–æ—Ä—ñ–≤ (–ø–æ—Å—Ç–µ—Ä–∏ –∑ —Å–µ—Ä–≤–µ—Ä—ñ–≤ Steam). –ë–µ–∑ —Ç–µ–≥—ñ–≤ —ñ –ø–æ—à—É–∫—É.</div>
      </div>
    </header>

    <nav class="tabs" role="tablist" aria-label="–°—Ç–∞–Ω –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ–π">
      <button class="tab active" role="tab" aria-selected="true" data-tab="finished">Finished</button>
      <button class="tab" role="tab" aria-selected="false" data-tab="work">In Work</button>
    </nav>


    <div class="legend">
      <span>Official: ‚úÖ / ‚ùå</span>
      <span>Flags üá∫üá¶/üá∫üá∏: dev/pub roots</span>
    </div>

    <div id="grid" class="grid" role="list"></div>

    <footer>
      <strong>Lacki23's</strong> site. Creator: <strong>LittleBit</strong>.
    </footer>
  </div>

<script>
const defaultGames = [
  {"title":"ENA: Dream BBQ","appId":"2134320","downloadUrl":"","official":false,"flags":["üá∫üá∏"],"collaboration":"In Work","platforms":["PC"]},
  {"title":"Pawnbarian","appId":"1142080","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"The Creepy Syndrome","appId":"2003880","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Blocky Dungeon","appId":"1683370","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Insomnia: Theater in the Head","appId":"2085360","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Remnants of Naezith","appId":"590590","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"To Have and to Hold","appId":"2513080","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"FINIS","appId":"2103370","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"It gets so lonely here","appId":"2386250","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"PocketCars","appId":"1170720","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Atrio: The Dark Wild","appId":"1125390","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Crashy Laps","appId":"2257410","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Six Days of Snow","appId":"754810","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Higurashi When They Cry Hou - Ch.2 Watanagashi","appId":"410890","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"DETECTIVE - Stella Porta case","appId":"2383220","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Sand Story","appId":"1749420","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Silence Channel 2","appId":"2145220","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Once on a windswept night","appId":"585880","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"On the Peril of Parrots","appId":"2137480","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Scholar's Mate","appId":"2095510","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"A Winter's Daydream","appId":"925340","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Demon Lord Reincarnation","appId":"2395150","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"HORROR TALES: The Beggar","appId":"1343340","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Prune & Milo","appId":"2787710","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Son of a Gun","appId":"2288600","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Bio Prototype:Re","appId":"3060520","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"The Sad Story of Emmeline Burns","appId":"429940","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]},
  {"title":"Numina","appId":"597060","downloadUrl":"","official":false,"flags":[],"collaboration":"", "platforms":["PC"]}
];

async function loadData(){
  try{
    const res = await fetch('games.json', {cache:'no-store'});
    if(!res.ok) throw new Error('fetch fail');
    const data = await res.json();
    ALL_ITEMS = data.games ?? defaultGames; splitItems(ALL_ITEMS); renderTab(CURRENT_TAB);
  }catch(e){
    ALL_ITEMS = defaultGames; splitItems(ALL_ITEMS); renderTab(CURRENT_TAB);
  }
}

// Build ordered list of candidate poster URLs for a game
function posterSources(item){
  const sources = [];
  if(item.imageUrl) sources.push(item.imageUrl);
  if(item.appId){
    const id = item.appId;
    // Prefer Cloudflare canonical path; then Akamai; then Fastly store_item_assets
    sources.push(
      `https://cdn.cloudflare.steamstatic.com/steam/apps/${id}/library_600x900.jpg`,
      `https://cdn.cloudflare.steamstatic.com/steam/apps/${id}/header.jpg`,
      `https://steamcdn-a.akamaihd.net/steam/apps/${id}/header.jpg`,
      `https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/${id}/header.jpg`
    );
  }
  return sources;
}

// Try each source until one loads
function attachPoster(img, item){
  const list = posterSources(item);
  let i = 0;
  if(!list.length){
    img.classList.add('broken');
    return;
  }
  const tryNext = ()=>{
    if(i >= list.length){
      img.classList.add('broken');
      img.removeAttribute('src');
      return;
    }
    img.src = list[i++];
  };
  img.addEventListener('error', tryNext, {once:false});
  tryNext();
}


let ALL_ITEMS = [];
let SPLIT = { finished: [], work: [] };
let CURRENT_TAB = 'finished';

function isWorkItem(g){
  const mark = (g.status || g.collaboration || '').toString().toLowerCase();
  return mark.includes('work'); // "In Work", "work in progress", —Ç–æ—â–æ
}

function splitItems(items){
  SPLIT.work = items.filter(isWorkItem);
  SPLIT.finished = items.filter(g => !isWorkItem(g));
}

function renderTab(which){
  CURRENT_TAB = which;
  const tabs = document.querySelectorAll('.tabs .tab');
  tabs.forEach(btn => {
    const on = btn.dataset.tab === which;
    btn.classList.toggle('active', on);
    btn.setAttribute('aria-selected', on ? 'true' : 'false');
  });
  const list = which === 'work' ? SPLIT.work : SPLIT.finished;
  render(list);
}

document.addEventListener('click', (e)=>{
  const btn = e.target.closest('.tab');
  if(!btn) return;
  const which = btn.dataset.tab;
  if(which) renderTab(which);
});


const TWEMOJI_SVG_BASE = "https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/";

function isoToTwemojiFilename(iso){
  const A = 'A'.codePointAt(0);
  const base = 0x1F1E6; // Regional Indicator Symbol Letter A
  const up = (iso||'').toUpperCase();
  if(!/^[A-Z]{2}$/.test(up)) return null;
  const cps = [up.codePointAt(0)-A+base, up.codePointAt(1)-A+base];
  return cps.map(cp => cp.toString(16)).join('-');
}

function emojiToTwemojiFilename(emoji){
  if(!emoji) return null;
  const cps = Array.from(emoji);
  // Expect two regional indicator symbols
  const hex = cps.map(ch => ch.codePointAt(0).toString(16)).join('-');
  if(hex.includes('1f1e') || hex.includes('1f1f')) return hex;
  // If it's not regional indicators, try interpreting as ISO
  return isoToTwemojiFilename(emoji);
}

function renderFlags(el, arr){
  el.innerHTML = '';
  if(!Array.isArray(arr) || arr.length===0){ el.style.display='none'; return; }
  el.style.display='inline-flex';
  for(const raw of arr){
    const fn = emojiToTwemojiFilename(raw);
    if(fn){
      const img = document.createElement('img');
      img.decoding = 'async';
      img.loading = 'lazy';
      img.alt = raw;
      img.src = TWEMOJI_SVG_BASE + fn + ".svg";
      img.onerror = () => { const span=document.createElement('span'); span.textContent=raw; img.replaceWith(span); };
      el.append(img);
    }else{
      // Fallback text
      const span = document.createElement('span');
      span.textContent = raw;
      el.append(span);
    }
  }
}

function render(items){
  const grid = document.getElementById('grid');
  grid.innerHTML = "";
  for(const g of items){
    const card = document.createElement('article');
    card.className = 'card';
    card.setAttribute('role','listitem');

    const img = document.createElement('img');
    img.className = 'poster';
    img.alt = ""; // —É–Ω–∏–∫–∞—î–º–æ –ø–æ–∫–∞–∑—É alt-—Ç–µ–∫—Å—Ç—É
    attachPoster(img, g);

    const content = document.createElement('div');
    content.className = 'content';

    const row1 = document.createElement('div');
    row1.className = 'row';
    const name = document.createElement('div');
    name.className = 'name';
    name.textContent = g.title;

    const flags = document.createElement('div');
    flags.className = 'flags';
    renderFlags(flags, g.flags);

    let cta = null;
    if(g.official){
      if(g.appId){
        cta = document.createElement('a');
        cta.className = 'link';
        cta.href = `https://store.steampowered.com/app/${g.appId}`;
        cta.target = "_blank"; cta.rel = "noopener";
        cta.textContent = "Open in Steam ‚Üí";
      }
    } else {
      if(g.downloadUrl){
        cta = document.createElement('a');
        cta.className = 'btn';
        cta.href = g.downloadUrl; cta.target = "_blank"; cta.rel = "noopener";
        cta.textContent = "Download";
      }
    }

    if(cta) row1.append(name, flags, cta); else row1.append(name, flags);

    const row2 = document.createElement('div');
    row2.className = 'row';
    const officialLabel = document.createElement('div'); officialLabel.className='label'; officialLabel.textContent='Official:';
    const officialVal = document.createElement('div'); officialVal.className='val'; officialVal.textContent = g.official ? '‚úÖ' : '‚ùå';
    row2.append(officialLabel, officialVal);

    const row3 = document.createElement('div');
    row3.className = 'row';
    const collabLabel = document.createElement('div'); collabLabel.className='label'; collabLabel.textContent='Collaboration:';
    const collabVal = document.createElement('div'); collabVal.className='val'; collabVal.textContent = g.collaboration || '‚Äî';
    row3.append(collabLabel, collabVal);

    const row4 = document.createElement('div');
    row4.className = 'row';
    const platLabel = document.createElement('div'); platLabel.className='label'; platLabel.textContent='–ü–ª–∞—Ç—Ñ–æ—Ä–º–∏:';
    const badges = document.createElement('div'); badges.className='badges';
    let plats = [];
    if(Array.isArray(g.platforms)) plats = g.platforms;
    else if(typeof g.platforms === 'string' && g.platforms.trim().length) plats = g.platforms.split(',').map(s=>s.trim()).filter(Boolean);
    if(plats.length===0){
      const dash = document.createElement('div'); dash.className='val'; dash.textContent='‚Äî'; badges.append(dash);
    }else{
      for(const p of plats){ const b=document.createElement('span'); b.className='pill'; b.textContent=p; badges.append(b); }
    }
    row4.append(platLabel, badges);

    content.append(row1,row2,row3,row4);
    card.append(img, content);
    grid.append(card);
  }
}

loadData();
</script>
</body>
</html>
